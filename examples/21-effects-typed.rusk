// 21 - 类型化（泛型）效应
//
// 效应接口也可以是泛型的，并且允许在调用点显式写出类型实参：
//   @Yield<int>.yield(10)
//
// 对比（Rust 的泛型函数）：
//   yield::<i32>(10)

interface Yield<T> { fn yield(value: T) -> int; }

fn main() -> int {
    let r = match @Yield<int>.yield(10) {
        @Yield<string>.yield(_) => resume(0)
        @Yield<int>.yield(n) => resume(n + 1)
        v => v
    };
    std::println(f"yield result = {r}");
    r
}
