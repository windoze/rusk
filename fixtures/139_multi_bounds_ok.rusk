// expect: ok int 7

trait Hash { fn hash() -> int; }
trait Show { fn show() -> string; }

struct S { x: int }

impl Hash for S { fn hash() -> int { self.x } }
impl Show for S { fn show() -> string { "S" } }

fn show_and_hash<T: Hash + Show>(x: T) -> int {
    if x.show() == "S" { x.hash() } else { 0 }
}

fn main() -> int {
    show_and_hash(S { x: 7 })
}
