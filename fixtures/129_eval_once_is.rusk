// expect: ok int 1

struct Cell { v: int }

interface Animal { fn tag() -> int; }

struct Dog { cell: Cell }

impl Animal for Dog { fn tag() -> int { 1 } }

fn make(cell: Cell) -> Animal {
    cell.v = cell.v + 1;
    Dog { cell: cell } as Animal
}

fn main() -> int {
    let c = Cell { v: 0 };
    let ok = make(c) is Dog;
    if ok { c.v } else { -1 }
}
